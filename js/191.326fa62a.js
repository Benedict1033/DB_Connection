"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[191],{8957:(e,l,a)=>{a.d(l,{Z:()=>o});var t=a(9302);function o(){const e=(0,t.Z)();e.notify.setDefaults({position:"bottom-right",timeout:2e3});const l=l=>{e.notify({color:"gray",message:l||"",html:!0})},a=l=>{e.notify({type:"positive",message:l||"Ok!",html:!0})},o=l=>{e.notify({type:"negative",message:l||"Fail",html:!0})};return{notifyDefault:l,notifySuccess:a,notifyError:o}}},5191:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});var t=a(9835),o=a(6970);const n={class:"q-pa-md"},s=["innerHTML"];function i(e,l,a,i,d,u){const m=(0,t.up)("q-icon"),c=(0,t.up)("q-toolbar-title"),p=(0,t.up)("q-toolbar"),r=(0,t.up)("q-th"),w=(0,t.up)("q-tr"),y=(0,t.up)("q-td"),h=(0,t.up)("q-btn"),f=(0,t.up)("q-table"),g=(0,t.up)("q-input"),v=(0,t.up)("q-card-section"),_=(0,t.up)("q-checkbox"),b=(0,t.up)("q-card-actions"),N=(0,t.up)("q-card"),S=(0,t.up)("q-dialog"),W=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(p,{class:"bg-grey-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{name:"inbox"}),(0,t.Uk)("   API Mapping")])),_:1})])),_:1}),(0,t._)("div",n,[(0,t.Wm)(f,{columns:d.columns,rows:d.rows,"row-key":"SystemName",onRowClick:l[0]||(l[0]=l=>e.selectedRow=l.row),expanded:d.expanded,"onUpdate:expanded":l[1]||(l[1]=e=>d.expanded=e)},{header:(0,t.w5)((e=>[(0,t.Wm)(w,{props:e},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(l=>((0,t.wg)(),(0,t.j4)(r,{key:l.name,props:e},{default:(0,t.w5)((()=>[(0,t._)("span",{innerHTML:l.label},null,8,s)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((e=>[(0,t.Wm)(w,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{key:"SystemName",class:"systemName"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.SystemName),1)])),_:2},1024),(0,t.Wm)(y,{key:"APIName",class:"APIName"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.APIName),1)])),_:2},1024),(0,t.Wm)(y,{key:"Actions"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{color:"secondary",style:{"margin-left":"5px",width:"30px"},icon:"edit",onClick:l=>d.showDetails(e.row.SystemName)},null,8,["onClick"]),(0,t.Wm)(h,{color:"deep-orange-9",style:{"margin-left":"5px",width:"30px"},icon:"delete",onClick:l=>d.confirmDelete(e.row.SystemID)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["columns","rows","expanded"]),(0,t.Wm)(S,{modelValue:d.show_dialog,"onUpdate:modelValue":l[6]||(l[6]=e=>d.show_dialog=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{style:{width:"95%","margin-left":"10px","margin-right":"10px"},modelValue:d.columns.SystemName,"onUpdate:modelValue":l[2]||(l[2]=e=>d.columns.SystemName=e),label:"SystemName",readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f,{style:{width:"400px"},rows:d.table2Rows,columns:d.table2Columns,"row-key":"APIName",selection:"multiple",selected:d.selected,"onUpdate:selected":l[4]||(l[4]=e=>d.selected=e)},{"body-cell-selection":(0,t.w5)((e=>[(0,t.Wm)(_,{value:e.row,modelValue:d.selected,"onUpdate:modelValue":l[3]||(l[3]=e=>d.selected=e),dense:""},null,8,["value","modelValue"])])),_:1},8,["rows","columns","selected"])])),_:1}),(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(h,{flat:"",label:"OK",color:"primary",onClick:l[5]||(l[5]=e=>d.isEditing?d.updateData():d.addData())},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(S,{modelValue:d.show_dialog2,"onUpdate:modelValue":l[9]||(l[9]=e=>d.show_dialog2=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{style:{width:"95%","margin-left":"10px","margin-right":"10px"},modelValue:d.columns.SystemName,"onUpdate:modelValue":l[7]||(l[7]=e=>d.columns.SystemName=e),label:"SystemName"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(h,{flat:"",label:"OK",color:"primary",onClick:l[8]||(l[8]=e=>d.isEditing?d.updateData():d.addData())},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"ADD",color:"primary",onClick:d.showDialog,style:{width:"110px"},icon:"add"},null,8,["onClick"])])),_:1})])],64)}var d=a(499),u=a(8957);const m={name:"IndexPage",data(){const{notifyError:e}=(0,u.Z)(),l=(0,d.iH)(!1),a=(0,d.iH)(!1),o=(0,d.iH)(!1),n=(0,d.iH)([]),s=(0,d.iH)(!1),i=(0,d.iH)([]),m=(0,d.iH)([]),c=(0,d.iH)([]),p=(0,d.iH)([]),r=(0,d.iH)([{name:"SystemName",align:"left",label:"SystemName",field:"SystemName"},{name:"APIName",align:"left",label:"APIName",field:"APIName"},{name:"Actions",align:"left",label:"Actions",field:"Actions"}]),w=(0,d.iH)([]),y=(0,d.iH)([{name:"APIName",align:"left",label:"APIName",field:"APIName",sortable:!0}]);(0,t.bv)((async()=>{const e=await fetch("https://localhost:44350/api/query_API_mapping");p.value=await e.json()}));const h=()=>{var l;if(""===r.value.SystemName)e("Value can't be null");else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({SYSTEM:r.value.SystemName})};fetch("https://localhost:44350/api/Check_sys",e).then((e=>e.text())).then((e=>{if(l=JSON.parse(e),console.log(l[0].ID),null===l[0].ID);else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s_id:l[0].ID,api_id:[73]})};fetch("https://localhost:44350/api/create_apimapping",e).then((e=>e.text())).then((e=>{window.location.reload()}))}}))}},f=()=>{i.value.s_id,c.value=m.value;for(var l=0;l<c.value.length;l++)c.value[l]=c.value[l].Id;if(""===c.value)e("Value can't be null");else{console.log(i.value.SystemID),console.log(c.value);const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s_id:i.value.SystemID,api_id:c.value})};fetch("https://localhost:44350/api/create_apimapping",e).then((e=>e.text())).then((e=>{window.location.reload()}))}},g=e=>{console.log(e);const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s_id:e,d_id:c.value})};fetch("https://localhost:44350/api/delete_apimapping",l).then(window.location.reload())},v=e=>{window.confirm("確定要刪除此項目嗎？")&&this.deleteRow(e)},_=()=>{s.value?(n.value=p.value.map((e=>e.DBName)),s.value=!0):(n.value=[],s.value=!1)},b=()=>{a.value=!a.value,o.value=!1},N=async e=>{i.value=this.rows.find((l=>l.SystemName===e));const a=await fetch("https://localhost:44350/api/query_api");w.value=await a.json(),r.value.SystemName=i.value.SystemName,r.value.APIName=i.value.APIName;for(var t=0;t<w.value.length;t++)r.value.APIName.includes(w.value[t].APIName)&&(w.value[t]="");w.value=w.value.filter((function(e){return""!=e})),l.value=!l.value,o.value=!0};return{columns:r,rows:p,table2Rows:w,table2Columns:y,addData:h,updateData:f,deleteRow:g,confirmDelete:v,expanded:n,isAllCollapsed:s,toggleExpandAll:_,show_dialog:l,show_dialog2:a,showDialog:b,isEditing:o,showDetails:N,selected:m,data:c}}};var c=a(1639),p=a(1663),r=a(1973),w=a(2857),y=a(1746),h=a(3532),f=a(1682),g=a(7220),v=a(4455),_=a(2074),b=a(4458),N=a(3190),S=a(6611),W=a(1221),k=a(1821),D=a(2146),I=a(9984),x=a.n(I);const A=(0,c.Z)(m,[["render",i]]),C=A;x()(m,"components",{QToolbar:p.Z,QToolbarTitle:r.Z,QIcon:w.Z,QTable:y.Z,QTr:h.Z,QTh:f.Z,QTd:g.Z,QBtn:v.Z,QDialog:_.Z,QCard:b.Z,QCardSection:N.Z,QInput:S.Z,QCheckbox:W.Z,QCardActions:k.Z}),x()(m,"directives",{ClosePopup:D.Z})}}]);