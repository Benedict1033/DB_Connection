"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[280],{8957:(e,l,n)=>{n.d(l,{Z:()=>o});var a=n(9302);function o(){const e=(0,a.Z)();e.notify.setDefaults({position:"bottom-right",timeout:2e3});const l=l=>{e.notify({color:"gray",message:l||"",html:!0})},n=l=>{e.notify({type:"positive",message:l||"Ok!",html:!0})},o=l=>{e.notify({type:"negative",message:l||"Fail",html:!0})};return{notifyDefault:l,notifySuccess:n,notifyError:o}}},4280:(e,l,n)=>{n.r(l),n.d(l,{default:()=>j});var a=n(9835),o=n(6970),t=n(1957);const i={class:"q-pa-md"},d=["innerHTML"],u=(0,a._)("div",{class:"text-h6"},"Add Connectiong String",-1),r=(0,a._)("div",{class:"text-h6"},"Update Connectiong String",-1),c={class:"row"},s={class:"row items-center justify-end q-gutter-sm"},m={class:"row items-center justify-end q-gutter-sm"};function p(e,l,n,p,g,w){const D=(0,a.up)("q-icon"),f=(0,a.up)("q-toolbar-title"),v=(0,a.up)("q-toolbar"),y=(0,a.up)("q-toggle"),h=(0,a.up)("q-th"),C=(0,a.up)("q-tr"),S=(0,a.up)("q-td"),k=(0,a.up)("q-btn"),_=(0,a.up)("q-table"),x=(0,a.up)("q-card-actions"),b=(0,a.up)("q-card-section"),W=(0,a.up)("q-input"),B=(0,a.up)("q-date"),V=(0,a.up)("q-popup-proxy"),N=(0,a.up)("q-card"),q=(0,a.up)("q-dialog"),Z=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(v,{class:"bg-grey-3"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"build"}),(0,a.Uk)("   DB Management")])),_:1})])),_:1}),(0,a._)("div",i,[(0,a.Wm)(_,{columns:g.columns,rows:g.rows,"row-key":"DBName",onRowClick:l[1]||(l[1]=l=>e.selectedRow=l.row),expanded:g.expanded,"onUpdate:expanded":l[2]||(l[2]=e=>g.expanded=e)},{header:(0,a.w5)((e=>[(0,a.Wm)(C,{props:e},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(n=>((0,a.wg)(),(0,a.j4)(h,{key:n.name,props:e},{default:(0,a.w5)((()=>["toggle"===n.name?((0,a.wg)(),(0,a.j4)(y,{key:0,modelValue:g.isAllCollapsed,"onUpdate:modelValue":l[0]||(l[0]=e=>g.isAllCollapsed=e),"checked-icon":"arrow_drop_up","unchecked-icon":"arrow_drop_down",onClick:g.toggleExpandAll},null,8,["modelValue","onClick"])):((0,a.wg)(),(0,a.iD)("span",{key:1,innerHTML:n.label},null,8,d))])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,a.w5)((e=>[(0,a.Wm)(C,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{modelValue:e.expand,"onUpdate:modelValue":l=>e.expand=l,"checked-icon":"arrow_drop_up","unchecked-icon":"arrow_drop_down"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(S,{key:"DBName",class:"dbName"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.DBName),1)])),_:2},1024),(0,a.Wm)(S,{key:"ConnectionString",class:"connection-string"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.ConnectiongString),1)])),_:2},1024),(0,a.Wm)(S,{key:"Deadline"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.Deadline),1)])),_:2},1024),(0,a.Wm)(S,{key:"Actions"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{color:"secondary",style:{"margin-left":"5px",width:"30px"},icon:"edit",onClick:l=>g.showDetails(e.row.DBName)},null,8,["onClick"]),(0,a.Wm)(k,{color:"deep-orange-9",style:{"margin-left":"5px",width:"30px"},icon:"delete",onClick:l=>g.confirmDelete(e.row.DBName)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"]),(0,a.wy)((0,a.Wm)(C,{props:e,style:{"background-color":"#fff4e7"}},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{key:"Show"}),(0,a.Wm)(S,{key:"DBName"}),(0,a.Wm)(S,{key:"ConnectionString",class:"connection-string"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.BackupConnectiongString),1)])),_:2},1024),(0,a.Wm)(S,{key:"Deadline"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.BackupDeadline),1)])),_:2},1024),(0,a.Wm)(S,{key:"Actions"})])),_:2},1032,["props"]),[[t.F8,e.expand]])])),_:1},8,["columns","rows","expanded"]),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{label:"ADD",color:"primary",onClick:g.showDialog,style:{width:"110px"},icon:"add"},null,8,["onClick"])])),_:1}),(0,a.Wm)(q,{modelValue:g.show_dialog,"onUpdate:modelValue":l[11]||(l[11]=e=>g.show_dialog=e),"full-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[!1===g.isEditing?((0,a.wg)(),(0,a.j4)(b,{key:0},{default:(0,a.w5)((()=>[u])),_:1})):(0,a.kq)("",!0),!0===g.isEditing?((0,a.wg)(),(0,a.j4)(b,{key:1},{default:(0,a.w5)((()=>[r])),_:1})):(0,a.kq)("",!0),(0,a._)("div",c,[(0,a.Wm)(W,{style:{width:"30%","margin-left":"20px"},modelValue:g.columns.DBName,"onUpdate:modelValue":l[3]||(l[3]=e=>g.columns.DBName=e),label:"DB Name"},null,8,["modelValue"]),(0,a.Wm)(W,{style:{width:"75%","margin-left":"20px"},modelValue:g.columns.ConnectiongString,"onUpdate:modelValue":l[4]||(l[4]=e=>g.columns.ConnectiongString=e),label:"First Connection String"},null,8,["modelValue"]),(0,a.Wm)(W,{style:{width:"15%","margin-left":"10px"},modelValue:g.columns.Deadline,"onUpdate:modelValue":l[5]||(l[5]=e=>g.columns.Deadline=e),label:"First Expire Date"},null,8,["modelValue"]),(0,a.Wm)(k,{style:{"margin-top":"15px","margin-left":"8px",width:"35px",height:"30px"},icon:"event"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{onBeforeShow:g.updateProxy,cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(B,{modelValue:g.proxyDate,"onUpdate:modelValue":l[6]||(l[6]=e=>g.proxyDate=e)},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.wy)((0,a.Wm)(k,{label:"Cancel",color:"primary",flat:""},null,512),[[Z]]),(0,a.wy)((0,a.Wm)(k,{label:"OK",color:"primary",flat:"",onClick:g.save},null,8,["onClick"]),[[Z]])])])),_:1},8,["modelValue"])])),_:1},8,["onBeforeShow"])])),_:1}),(0,a.Wm)(W,{style:{width:"75%","margin-left":"20px"},modelValue:g.columns.ConnectionString2,"onUpdate:modelValue":l[7]||(l[7]=e=>g.columns.ConnectionString2=e),label:"Second Connection String"},null,8,["modelValue"]),(0,a.Wm)(W,{style:{width:"15%","margin-left":"10px"},modelValue:g.columns.Deadline2,"onUpdate:modelValue":l[8]||(l[8]=e=>g.columns.Deadline2=e),label:"Second Expire Date"},null,8,["modelValue"]),(0,a.Wm)(k,{style:{"margin-top":"15px","margin-left":"8px",width:"35px",height:"30px"},icon:"event"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{onBeforeShow:g.updateProxy2,cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(B,{modelValue:g.proxyDate,"onUpdate:modelValue":l[9]||(l[9]=e=>g.proxyDate=e)},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.wy)((0,a.Wm)(k,{label:"Cancel",color:"primary",flat:""},null,512),[[Z]]),(0,a.wy)((0,a.Wm)(k,{label:"OK",color:"primary",flat:"",onClick:g.save2},null,8,["onClick"]),[[Z]])])])),_:1},8,["modelValue"])])),_:1},8,["onBeforeShow"])])),_:1})])])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(k,{flat:"",label:"OK",color:"primary",onClick:l[10]||(l[10]=e=>g.isEditing?g.updateData():g.addData())},null,512),[[Z]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])],64)}var g=n(499),w=n(8957);const D={data(){const{notifyError:e}=(0,w.Z)(),l=(0,g.iH)(!1),n=(0,g.iH)(!1),o=(0,g.iH)([]),t=(0,g.iH)(!1),i=(0,g.iH)([]),d=new Date,u=`${d.getFullYear()}/${d.getMonth()+1}/${d.getDate()}`,r=(0,g.iH)(u),c=(0,g.iH)(u),s=(0,g.iH)(u),m=(0,g.iH)(u),p=(0,g.iH)([]),D=(0,g.iH)([{name:"toggle",align:"left",label:"",field:"Show"},{name:"DBName",align:"left",label:"DB Name",field:"DBName",sortable:!0},{name:"ConnectiongString",align:"left",label:"Connection String",field:"ConnectiongString"},{name:"Deadline",align:"left",label:"Expire Date",field:"Deadline"},{name:"Actions",align:"left",label:"Actions",field:"Actions"}]);(0,a.bv)((async()=>{const e=await fetch("https://localhost:44350/api/query_db");p.value=await e.json()}));const f=()=>{if(""===D.value.DBName||""===D.value.ConnectiongString||""===D.value.ConnectionString2||""===D.value.Deadline||""===D.value.Deadline2)e("Value can't be null");else{const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({DBName:D.value.DBName,ConnectiongString:D.value.ConnectiongString,ConnectiongString2:D.value.ConnectionString2,Deadline:D.value.Deadline,Deadline2:D.value.Deadline2})};fetch("https://localhost:44350/api/create_db",l).then((e=>e.text())).then((l=>{'"Create Success"'===l?window.location.reload():e(l)}))}},v=()=>{if(""===D.value.DBName||""===D.value.ConnectiongString||""===D.value.ConnectionString2||""===D.value.Deadline||""===D.value.Deadline2)e("Value can't be null");else{const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({DBName:D.value.DBName,ConnectiongString:D.value.ConnectiongString,ConnectiongString2:D.value.ConnectionString2,Deadline:D.value.Deadline,Deadline2:D.value.Deadline2})};fetch("https://localhost:44350/api/update_db",l).then((e=>e.text())).then((l=>{'"Updated Success"'===l?window.location.reload():e(l)}))}},y=e=>{const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({DBName:e,ConnectiongString:D.value.ConnectiongString,ConnectiongString2:D.value.ConnectionString2,Deadline:D.value.Deadline,Deadline2:D.value.Deadline2})};fetch("https://localhost:44350/api/delete_db",l).then(window.location.reload())},h=e=>{window.confirm("確定要刪除此項目嗎？")&&this.deleteRow(e)},C=()=>{t.value?(o.value=p.value.map((e=>e.DBName)),t.value=!0):(o.value=[],t.value=!1)},S=()=>{D.value.DBName="",D.value.ConnectiongString="",D.value.ConnectionString2="",D.value.Deadline="",D.value.Deadline2="",l.value=!l.value,n.value=!1},k=e=>{i.value=this.rows.find((l=>l.DBName===e)),D.value.DBName=i.value.DBName,D.value.ConnectiongString=i.value.ConnectiongString,D.value.ConnectionString2=i.value.BackupConnectiongString,D.value.Deadline=i.value.Deadline,D.value.Deadline2=i.value.BackupDeadline,l.value=!l.value,n.value=!0};return{columns:D,rows:p,addData:f,updateData:v,deleteRow:y,confirmDelete:h,expanded:o,isAllCollapsed:t,toggleExpandAll:C,show_dialog:l,showDialog:S,isEditing:n,showDetails:k,today:d,formattedDate:u,date:r,proxyDate:c,date2:s,proxyDate2:m,updateProxy(){c.value=r.value},save(){r.value=c.value,D.value.Deadline=c.value},updateProxy2(){m.value=r.value},save2(){s.value=c.value,D.value.Deadline2=c.value}}}};var f=n(1639),v=n(1663),y=n(1973),h=n(2857),C=n(1746),S=n(3532),k=n(1682),_=n(3175),x=n(7220),b=n(4455),W=n(1821),B=n(2074),V=n(4458),N=n(3190),q=n(6611),Z=n(2765),U=n(6711),T=n(2146),Q=n(9984),H=n.n(Q);const A=(0,f.Z)(D,[["render",p]]),j=A;H()(D,"components",{QToolbar:v.Z,QToolbarTitle:y.Z,QIcon:h.Z,QTable:C.Z,QTr:S.Z,QTh:k.Z,QToggle:_.Z,QTd:x.Z,QBtn:b.Z,QCardActions:W.Z,QDialog:B.Z,QCard:V.Z,QCardSection:N.Z,QInput:q.Z,QPopupProxy:Z.Z,QDate:U.Z}),H()(D,"directives",{ClosePopup:T.Z})}}]);