"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[372],{8957:(e,t,o)=>{o.d(t,{Z:()=>s});var a=o(9302);function s(){const e=(0,a.Z)();e.notify.setDefaults({position:"bottom-right",timeout:2e3});const t=t=>{e.notify({color:"gray",message:t||"",html:!0})},o=t=>{e.notify({type:"positive",message:t||"Ok!",html:!0})},s=t=>{e.notify({type:"negative",message:t||"Fail",html:!0})};return{notifyDefault:t,notifySuccess:o,notifyError:s}}},2372:(e,t,o)=>{o.r(t),o.d(t,{default:()=>_});var a=o(9835),s=o(1957);const i=(0,a._)("div",{cla:"row"}," ",-1),l={class:"row justify-center items-center"},n=(0,a._)("div",{class:"text-h5 text-grey-9"},"Log In Your Account",-1),r=(0,a._)("div",null," ",-1);function u(e,t,o,u,d,c){const m=(0,a.up)("q-input"),p=(0,a.up)("q-icon"),g=(0,a.up)("q-form"),h=(0,a.up)("q-card-section"),f=(0,a.up)("q-btn"),y=(0,a.up)("q-card-actions"),v=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)(a.HY,null,[i,(0,a._)("div",l,[(0,a.Wm)(v,{square:"",bordered:"",class:"q-pa-lg shadow-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[n,r,(0,a.Wm)(g,{class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{square:"",filled:"",modelValue:e.form.userName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.userName=t),type:"email",label:"User Name"},null,8,["modelValue"]),(0,a.Wm)(m,{modelValue:e.form.password,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.password=t),filled:"",type:e.isPwd?"password":"text",label:"Password",onKeyup:t[3]||(t[3]=(0,s.D2)((t=>e.actLogin()),["enter"]))},{append:(0,a.w5)((()=>[(0,a.Wm)(p,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[1]||(t[1]=t=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"])])),_:1})])),_:1}),(0,a.Wm)(y,{class:"q-px-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{unelevated:"",color:"light-green-7",size:"lg",class:"full-width",label:"Login",onClick:t[4]||(t[4]=t=>e.actLogin())})])),_:1})])),_:1})])],64)}var d=o(499),c=o(8957),m=o(9613);const p=(0,a.aZ)({name:"LoginPage",setup(){const e=(0,d.iH)(!1),t=(0,d.iH)(!1),o=(0,d.iH)(!1),s=(0,d.iH)(""),i=(0,a.f3)("mapGlobalState"),{userInfo:l,setUserRights:n}=i,{notifyError:r}=(0,c.Z)(),u=(0,d.iH)({userName:"",password:""}),p=()=>{const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserMail:m.Z.getItem("User")})};fetch("https://localhost:44350/api/query_right",a).then((e=>e.text())).then((a=>{try{var s=JSON.parse(a);s[0].RoleRight,console.log(s[0].RoleRight),"Admin"===s[0].RoleRight&&(e.value=!0,t.value=!0,o.value=!0,m.Z.set("Right","Admin")),"DBA"===s[0].RoleRight&&(t.value=!0,o.value=!0,m.Z.set("Right","DBA")),"SysAdmin"===s[0].RoleRight&&(o.value=!0,m.Z.set("Right","SysAdmin")),window.location.reload()}catch{m.Z.set("Right","user"),window.location.reload()}}))},g=()=>{m.Z.set("Login",!1),"Admin"!=u.value.userName?s.value=u.value.userName+"@makalot.com":s.value=u.value.userName,m.Z.set("User",s.value);const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Account:s.value,Password:u.value.password})};fetch("https://localhost:44350/api/login",e).then((e=>e.text())).then((e=>{'"ok"'==e?(m.Z.set("Login",!0),p()):r(e)}))};return{...(0,d.BK)(l),isPwd:(0,d.iH)(!0),form:u,actLogin:g,Admin:e,SysAdmin:o,DBA:t,checkUserRight:p,userName:s}}});var g=o(1639),h=o(4458),f=o(3190),y=o(8326),v=o(6611),w=o(2857),Z=o(1821),R=o(4455),b=o(9984),q=o.n(b);const A=(0,g.Z)(p,[["render",u]]),_=A;q()(p,"components",{QCard:h.Z,QCardSection:f.Z,QForm:y.Z,QInput:v.Z,QIcon:w.Z,QCardActions:Z.Z,QBtn:R.Z})}}]);