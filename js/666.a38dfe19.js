"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[666],{8957:(e,l,a)=>{a.d(l,{Z:()=>o});var t=a(9302);function o(){const e=(0,t.Z)();e.notify.setDefaults({position:"bottom-right",timeout:2e3});const l=l=>{e.notify({color:"gray",message:l||"",html:!0})},a=l=>{e.notify({type:"positive",message:l||"Ok!",html:!0})},o=l=>{e.notify({type:"negative",message:l||"Fail",html:!0})};return{notifyDefault:l,notifySuccess:a,notifyError:o}}},7666:(e,l,a)=>{a.r(l),a.d(l,{default:()=>H});var t=a(9835),o=a(6970);const n={class:"q-pa-md"},s=["innerHTML"],i=(0,t._)("div",{class:"text-h6"},"Add DB Mapping",-1),d=(0,t._)("div",{class:"text-h6"},"Update DB Mapping",-1),u=(0,t._)("div",{class:"text-h6"},"Add DB Mapping System",-1);function m(e,l,a,m,c,p){const r=(0,t.up)("q-icon"),w=(0,t.up)("q-toolbar-title"),h=(0,t.up)("q-toolbar"),y=(0,t.up)("q-th"),f=(0,t.up)("q-tr"),g=(0,t.up)("q-td"),v=(0,t.up)("q-btn"),_=(0,t.up)("q-table"),b=(0,t.up)("q-card-section"),D=(0,t.up)("q-checkbox"),N=(0,t.up)("q-card-actions"),S=(0,t.up)("q-card"),k=(0,t.up)("q-dialog"),W=(0,t.up)("q-input"),x=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(h,{class:"bg-grey-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{name:"send"}),(0,t.Uk)("   DB Mapping")])),_:1})])),_:1}),(0,t._)("div",n,[(0,t.Wm)(_,{columns:c.columns,rows:c.rows,"row-key":"SystemName",onRowClick:l[0]||(l[0]=l=>e.selectedRow=l.row),expanded:c.expanded,"onUpdate:expanded":l[1]||(l[1]=e=>c.expanded=e)},{header:(0,t.w5)((e=>[(0,t.Wm)(f,{props:e},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(l=>((0,t.wg)(),(0,t.j4)(y,{key:l.name,props:e},{default:(0,t.w5)((()=>[(0,t._)("span",{innerHTML:l.label},null,8,s)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((e=>[(0,t.Wm)(f,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{key:"SystemName",class:"systemName"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.SystemName),1)])),_:2},1024),(0,t.Wm)(g,{key:"DBName",class:"dbName"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.DBName),1)])),_:2},1024),(0,t.Wm)(g,{key:"Actions"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{color:"secondary",style:{"margin-left":"5px",width:"30px"},icon:"edit",onClick:l=>c.showDetails(e.row.SystemName)},null,8,["onClick"]),(0,t.Wm)(v,{color:"deep-orange-9",style:{"margin-left":"5px",width:"30px"},icon:"delete",onClick:l=>c.confirmDelete(e.row.SystemID)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["columns","rows","expanded"]),(0,t.Wm)(k,{modelValue:c.show_dialog,"onUpdate:modelValue":l[5]||(l[5]=e=>c.show_dialog=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[!1===c.isEditing?((0,t.wg)(),(0,t.j4)(b,{key:0},{default:(0,t.w5)((()=>[i])),_:1})):(0,t.kq)("",!0),!0===c.isEditing?((0,t.wg)(),(0,t.j4)(b,{key:1},{default:(0,t.w5)((()=>[d])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{style:{width:"400px"},rows:c.table2Rows,columns:c.table2Columns,"row-key":"DBName",selection:"multiple",selected:c.selected,"onUpdate:selected":l[3]||(l[3]=e=>c.selected=e)},{"body-cell-selection":(0,t.w5)((e=>[(0,t.Wm)(D,{value:e.row,modelValue:c.selected,"onUpdate:modelValue":l[2]||(l[2]=e=>c.selected=e),dense:""},null,8,["value","modelValue"])])),_:1},8,["rows","columns","selected"])])),_:1}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(v,{flat:"",label:"OK",color:"primary",onClick:l[4]||(l[4]=e=>c.isEditing?c.updateData():c.addData())},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(k,{modelValue:c.show_dialog2,"onUpdate:modelValue":l[8]||(l[8]=e=>c.show_dialog2=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[u,(0,t.Wm)(W,{style:{width:"95%","margin-left":"10px","margin-right":"10px"},modelValue:c.columns.SystemName,"onUpdate:modelValue":l[6]||(l[6]=e=>c.columns.SystemName=e),label:"System Name"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(v,{flat:"",label:"OK",color:"primary",onClick:l[7]||(l[7]=e=>c.isEditing?c.updateData():c.addData())},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,{label:"ADD",color:"primary",onClick:c.showDialog,style:{width:"110px"},icon:"add"},null,8,["onClick"])])),_:1})])],64)}var c=a(499),p=a(8957);const r={name:"IndexPage",data(){const{notifyError:e}=(0,p.Z)(),l=(0,c.iH)(!1),a=(0,c.iH)(!1),o=(0,c.iH)(!1),n=(0,c.iH)([]),s=(0,c.iH)(!1),i=(0,c.iH)([]),d=(0,c.iH)([]),u=(0,c.iH)([]),m=(0,c.iH)([]),r=(0,c.iH)([{name:"SystemName",align:"left",label:"System Name",field:"SystemName"},{name:"DBName",align:"left",label:"DB Name",field:"DBName"},{name:"Actions",align:"left",label:"Actions",field:"Actions"}]),w=(0,c.iH)([]),h=(0,c.iH)([{name:"DBName",align:"left",label:"DBName",field:"DBName",sortable:!0}]);(0,t.bv)((async()=>{const e=await fetch("https://localhost:44350/api/query_mapping");m.value=await e.json()}));const y=()=>{var l;if(""===r.value.SystemName)e("Value can't be null");else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({SYSTEM:r.value.SystemName})};fetch("https://localhost:44350/api/Check_sys",e).then((e=>e.text())).then((e=>{if(l=JSON.parse(e),console.log(l[0].ID),null===l[0].ID);else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s_id:l[0].ID,d_id:[96]})};fetch("https://localhost:44350/api/create_dbmapping",e).then((e=>e.text())).then((e=>{window.location.reload()}))}}))}},f=()=>{i.value.s_id,u.value=d.value,console.log(i.value.s_id),console.log(u.value);for(var l=0;l<u.value.length;l++)u.value[l]=u.value[l].d_id;if(""===u.value)e("Value can't be null");else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s_id:i.value.SystemID,d_id:u.value})};fetch("https://localhost:44350/api/create_dbmapping",e).then((e=>e.text())).then((e=>{window.location.reload()}))}},g=e=>{console.log(e);const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s_id:e,d_id:u.value})};fetch("https://localhost:44350/api/delete_dbmapping",l).then(window.location.reload())},v=e=>{window.confirm("確定要刪除此項目嗎？")&&this.deleteRow(e)},_=()=>{s.value?(n.value=m.value.map((e=>e.DBName)),s.value=!0):(n.value=[],s.value=!1)},b=()=>{r.value.SystemName="",a.value=!a.value,o.value=!1},D=async e=>{i.value=this.rows.find((l=>l.SystemName===e));const a=await fetch("https://localhost:44350/api/query_db");w.value=await a.json(),r.value.SystemName=i.value.SystemName,r.value.DBName=i.value.DBName;for(var t=0;t<w.value.length;t++)r.value.DBName.includes(w.value[t].DBName)&&(w.value[t]="");w.value=w.value.filter((function(e){return""!=e})),l.value=!l.value,o.value=!0};return{columns:r,rows:m,table2Rows:w,table2Columns:h,addData:y,updateData:f,deleteRow:g,confirmDelete:v,expanded:n,isAllCollapsed:s,toggleExpandAll:_,show_dialog:l,show_dialog2:a,showDialog:b,isEditing:o,showDetails:D,selected:d,data:u}}};var w=a(1639),h=a(1663),y=a(1973),f=a(2857),g=a(1746),v=a(3532),_=a(1682),b=a(7220),D=a(4455),N=a(2074),S=a(4458),k=a(3190),W=a(6611),x=a(1221),C=a(1821),q=a(2146),T=a(9984),B=a.n(T);const Z=(0,w.Z)(r,[["render",m]]),H=Z;B()(r,"components",{QToolbar:h.Z,QToolbarTitle:y.Z,QIcon:f.Z,QTable:g.Z,QTr:v.Z,QTh:_.Z,QTd:b.Z,QBtn:D.Z,QDialog:N.Z,QCard:S.Z,QCardSection:k.Z,QInput:W.Z,QCheckbox:x.Z,QCardActions:C.Z}),B()(r,"directives",{ClosePopup:q.Z})}}]);