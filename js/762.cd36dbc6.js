"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[762],{8957:(e,l,a)=>{a.d(l,{Z:()=>o});var t=a(9302);function o(){const e=(0,t.Z)();e.notify.setDefaults({position:"bottom-right",timeout:2e3});const l=l=>{e.notify({color:"gray",message:l||"",html:!0})},a=l=>{e.notify({type:"positive",message:l||"Ok!",html:!0})},o=l=>{e.notify({type:"negative",message:l||"Fail",html:!0})};return{notifyDefault:l,notifySuccess:a,notifyError:o}}},9762:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Z});var t=a(9835),o=a(6970);const n={class:"q-pa-md"},s=["innerHTML"];function i(e,l,a,i,d,u){const m=(0,t.up)("q-icon"),c=(0,t.up)("q-toolbar-title"),r=(0,t.up)("q-toolbar"),p=(0,t.up)("q-th"),w=(0,t.up)("q-tr"),h=(0,t.up)("q-td"),y=(0,t.up)("q-btn"),f=(0,t.up)("q-table"),g=(0,t.up)("q-input"),v=(0,t.up)("q-card-section"),b=(0,t.up)("q-checkbox"),_=(0,t.up)("q-card-actions"),D=(0,t.up)("q-card"),N=(0,t.up)("q-dialog"),S=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(r,{class:"bg-grey-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{name:"send"}),(0,t.Uk)("   DB Mapping")])),_:1})])),_:1}),(0,t._)("div",n,[(0,t.Wm)(f,{columns:d.columns,rows:d.rows,"row-key":"SystemName",onRowClick:l[0]||(l[0]=l=>e.selectedRow=l.row),expanded:d.expanded,"onUpdate:expanded":l[1]||(l[1]=e=>d.expanded=e)},{header:(0,t.w5)((e=>[(0,t.Wm)(w,{props:e},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(l=>((0,t.wg)(),(0,t.j4)(p,{key:l.name,props:e},{default:(0,t.w5)((()=>[(0,t._)("span",{innerHTML:l.label},null,8,s)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((e=>[(0,t.Wm)(w,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{key:"SystemName",class:"systemName"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.SystemName),1)])),_:2},1024),(0,t.Wm)(h,{key:"DBName",class:"dbName"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.DBName),1)])),_:2},1024),(0,t.Wm)(h,{key:"Actions"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{color:"secondary",style:{"margin-left":"5px",width:"30px"},icon:"edit",onClick:l=>d.showDetails(e.row.SystemName)},null,8,["onClick"]),(0,t.Wm)(y,{color:"deep-orange-9",style:{"margin-left":"5px",width:"30px"},icon:"delete",onClick:l=>d.confirmDelete(e.row.SystemID)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["columns","rows","expanded"]),(0,t.Wm)(N,{modelValue:d.show_dialog,"onUpdate:modelValue":l[6]||(l[6]=e=>d.show_dialog=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{style:{width:"95%","margin-left":"10px","margin-right":"10px"},modelValue:d.columns.SystemName,"onUpdate:modelValue":l[2]||(l[2]=e=>d.columns.SystemName=e),label:"SystemName",readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f,{style:{width:"400px"},rows:d.table2Rows,columns:d.table2Columns,"row-key":"DBName",selection:"multiple",selected:d.selected,"onUpdate:selected":l[4]||(l[4]=e=>d.selected=e)},{"body-cell-selection":(0,t.w5)((e=>[(0,t.Wm)(b,{value:e.row,modelValue:d.selected,"onUpdate:modelValue":l[3]||(l[3]=e=>d.selected=e),dense:""},null,8,["value","modelValue"])])),_:1},8,["rows","columns","selected"])])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(y,{flat:"",label:"OK",color:"primary",onClick:l[5]||(l[5]=e=>d.isEditing?d.updateData():d.addData())},null,512),[[S]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(N,{modelValue:d.show_dialog2,"onUpdate:modelValue":l[9]||(l[9]=e=>d.show_dialog2=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{style:{width:"95%","margin-left":"10px","margin-right":"10px"},modelValue:d.columns.SystemName,"onUpdate:modelValue":l[7]||(l[7]=e=>d.columns.SystemName=e),label:"SystemName"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(y,{flat:"",label:"OK",color:"primary",onClick:l[8]||(l[8]=e=>d.isEditing?d.updateData():d.addData())},null,512),[[S]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,{label:"ADD",color:"primary",onClick:d.showDialog,style:{width:"110px"},icon:"add"},null,8,["onClick"])])),_:1})])],64)}var d=a(499),u=a(8957);const m={name:"IndexPage",data(){const{notifyError:e}=(0,u.Z)(),l=(0,d.iH)(!1),a=(0,d.iH)(!1),o=(0,d.iH)(!1),n=(0,d.iH)([]),s=(0,d.iH)(!1),i=(0,d.iH)([]),m=(0,d.iH)([]),c=(0,d.iH)([]),r=(0,d.iH)([]),p=(0,d.iH)([]),w=(0,d.iH)([{name:"SystemName",align:"left",label:"SystemName",field:"SystemName"},{name:"DBName",align:"left",label:"DBName",field:"DBName"},{name:"Actions",align:"left",label:"Actions",field:"Actions"}]),h=(0,d.iH)([]),y=(0,d.iH)([{name:"DBName",align:"left",label:"DBName",field:"DBName",sortable:!0}]);(0,t.bv)((async()=>{const e=await fetch("https://localhost:44350/api/tsett");p.value=await e.json(),i.value=[...p.value].reverse()}));const f=()=>{var l;if(""===w.value.SystemName)e("Value can't be null");else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({SYSTEM:w.value.SystemName})};fetch("https://localhost:44350/api/Check_sys",e).then((e=>e.text())).then((e=>{if(l=JSON.parse(e),console.log(l[0].ID),null===l[0].ID);else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s_id:l[0].ID,d_id:[96]})};fetch("https://localhost:44350/api/create_dbmapping",e).then((e=>e.text())).then((e=>{window.location.reload()}))}}))}},g=()=>{m.value.s_id,r.value=c.value;for(var l=0;l<r.value.length;l++)r.value[l]=r.value[l].d_id;if(""===r.value)e("Value can't be null");else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s_id:m.value.SystemID,d_id:r.value})};fetch("https://localhost:44350/api/create_dbmapping",e).then((e=>e.text())).then((e=>{window.location.reload()}))}},v=e=>{console.log(e);const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s_id:e,d_id:r.value})};fetch("https://localhost:44350/api/delete_dbmapping",l).then(window.location.reload())},b=e=>{window.confirm("確定要刪除此項目嗎？")&&this.deleteRow(e)},_=()=>{s.value?(n.value=p.value.map((e=>e.DBName)),s.value=!0):(n.value=[],s.value=!1)},D=()=>{a.value=!a.value,o.value=!1},N=async e=>{m.value=this.rows.find((l=>l.SystemName===e));const a=await fetch("https://localhost:44350/api/query_db");h.value=await a.json(),w.value.SystemName=m.value.SystemName,w.value.DBName=m.value.DBName;for(var t=0;t<h.value.length;t++)w.value.DBName.includes(h.value[t].DBName)&&(h.value[t]="");h.value=h.value.filter((function(e){return""!=e})),l.value=!l.value,o.value=!0};return{columns:w,rows:i,table2Rows:h,table2Columns:y,addData:f,updateData:g,deleteRow:v,confirmDelete:b,expanded:n,isAllCollapsed:s,toggleExpandAll:_,show_dialog:l,show_dialog2:a,showDialog:D,isEditing:o,showDetails:N,selected:c,data:r}}};var c=a(1639),r=a(1663),p=a(1973),w=a(2857),h=a(1746),y=a(3532),f=a(1682),g=a(7220),v=a(4455),b=a(2074),_=a(4458),D=a(3190),N=a(6611),S=a(1221),W=a(1821),k=a(2146),C=a(9984),x=a.n(C);const T=(0,c.Z)(m,[["render",i]]),Z=T;x()(m,"components",{QToolbar:r.Z,QToolbarTitle:p.Z,QIcon:w.Z,QTable:h.Z,QTr:y.Z,QTh:f.Z,QTd:g.Z,QBtn:v.Z,QDialog:b.Z,QCard:_.Z,QCardSection:D.Z,QInput:N.Z,QCheckbox:S.Z,QCardActions:W.Z}),x()(m,"directives",{ClosePopup:k.Z})}}]);