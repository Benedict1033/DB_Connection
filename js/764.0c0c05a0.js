"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[764],{8957:(e,l,t)=>{t.d(l,{Z:()=>o});var a=t(9302);function o(){const e=(0,a.Z)();e.notify.setDefaults({position:"bottom-right",timeout:2e3});const l=l=>{e.notify({color:"gray",message:l||"",html:!0})},t=l=>{e.notify({type:"positive",message:l||"Ok!",html:!0})},o=l=>{e.notify({type:"negative",message:l||"Fail",html:!0})};return{notifyDefault:l,notifySuccess:t,notifyError:o}}},5764:(e,l,t)=>{t.r(l),t.d(l,{default:()=>T});var a=t(9835),o=t(6970);const i={class:"q-pa-md"},n=["innerHTML"],s=(0,a._)("div",{class:"text-h6"},"Update Role Right!",-1),r={class:"row"};function u(e,l,t,u,d,p){const c=(0,a.up)("q-icon"),h=(0,a.up)("q-toolbar-title"),m=(0,a.up)("q-toolbar"),w=(0,a.up)("q-th"),g=(0,a.up)("q-tr"),f=(0,a.up)("q-td"),v=(0,a.up)("q-btn"),U=(0,a.up)("q-table"),y=(0,a.up)("q-card-actions"),b=(0,a.up)("q-card-section"),_=(0,a.up)("q-input"),R=(0,a.up)("q-select"),M=(0,a.up)("q-card"),k=(0,a.up)("q-dialog"),W=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(m,{class:"bg-grey-3"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"people"}),(0,a.Uk)("   Role Assign")])),_:1})])),_:1}),(0,a._)("div",i,[(0,a.Wm)(U,{columns:d.columns,rows:d.rows,"row-key":"UserMail",onRowClick:l[0]||(l[0]=l=>e.selectedRow=l.row),expanded:d.expanded,"onUpdate:expanded":l[1]||(l[1]=e=>d.expanded=e)},{header:(0,a.w5)((e=>[(0,a.Wm)(g,{props:e},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(l=>((0,a.wg)(),(0,a.j4)(w,{key:l.name,props:e},{default:(0,a.w5)((()=>[(0,a._)("span",{innerHTML:l.label},null,8,n)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,a.w5)((e=>[(0,a.Wm)(g,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{key:"UserMail"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.UserMail),1)])),_:2},1024),(0,a.Wm)(f,{key:"RoleRight"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.RoleRight),1)])),_:2},1024),(0,a.Wm)(f,{key:"Actions"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{color:"secondary",style:{"margin-left":"5px",width:"30px"},icon:"edit",onClick:l=>d.showDetails(e.row.UserMail)},null,8,["onClick"]),(0,a.Wm)(v,{color:"deep-orange-9",style:{"margin-left":"5px",width:"30px"},icon:"delete",onClick:l=>d.confirmDelete(e.row.UserMail)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["columns","rows","expanded"]),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{label:"ADD",color:"primary",onClick:d.showDialog,style:{width:"110px"},icon:"add"},null,8,["onClick"])])),_:1}),(0,a.Wm)(k,{modelValue:d.show_dialog,"onUpdate:modelValue":l[5]||(l[5]=e=>d.show_dialog=e),"full-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(M,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[s])),_:1}),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a.Wm)(_,{style:{width:"60%","margin-left":"25px"},modelValue:d.columns.UserMail,"onUpdate:modelValue":l[2]||(l[2]=e=>d.columns.UserMail=e),label:"UserMail"},null,8,["modelValue"]),(0,a.Wm)(R,{style:{width:"30%","margin-left":"25px"},modelValue:d.selectedOption,"onUpdate:modelValue":l[3]||(l[3]=e=>d.selectedOption=e),options:d.options,label:"Select an option",filled:""},null,8,["modelValue","options"])])])),_:1}),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(v,{flat:"",label:"OK",color:"primary",onClick:l[4]||(l[4]=e=>d.isEditing?d.updateData():d.addData())},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])],64)}var d=t(499),p=t(8957);const c={data(){const{notifyError:e}=(0,p.Z)(),l=(0,d.iH)(!1),t=(0,d.iH)(!1),o=(0,d.iH)([]),i=(0,d.iH)(!1),n=(0,d.iH)([]),s=(0,d.iH)([]),r=(0,d.iH)(null),u=(0,d.iH)(""),c=(0,d.iH)([]),h=(0,d.iH)([{name:"UserMail",align:"left",label:"UserMail",field:"UserMail"},{name:"UserRight",align:"left",label:"UserRight",field:"UserRight"},{name:"Actions",align:"left",label:"Actions",field:"Actions"}]);(0,a.bv)((async()=>{const e=await fetch("https://localhost:44350/api/query_user");c.value=await e.json(),n.value=[...c.value].reverse()}));const m=()=>{if(""===h.value.UserMail||null===this.selectedOption)e("Value can't be null");else{"Admin"===h.value.UserMail||(u.value=h.value.UserMail+"@makalot.com"),h.value.UserRight=this.selectedOption;const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserMail:u.value,UserRight:h.value.UserRight})};fetch("https://localhost:44350/api/create_right",l).then((e=>e.text())).then((l=>{'"Create Success"'===l?window.location.reload():e(l)}))}},w=()=>{if(null===this.selectedOption)e("Value can't be null");else{h.value.UserRight=this.selectedOption;const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserMail:h.value.UserMail,UserRight:h.value.UserRight})};fetch("https://localhost:44350/api/update_right",l).then((e=>e.text())).then((l=>{'"Updated Success"'===l?window.location.reload():e(l)}))}},g=e=>{const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserMail:e})};fetch("https://localhost:44350/api/delete_right",l).then(window.location.reload())},f=e=>{window.confirm("確定要刪除此項目嗎？")&&this.deleteRow(e)},v=()=>{i.value?(o.value=c.value.map((e=>e.DBName)),i.value=!0):(o.value=[],i.value=!1)},U=()=>{h.value.UserMail="",h.value.RoleRight="",l.value=!l.value,t.value=!1},y=e=>{s.value=this.rows.find((l=>l.UserMail===e)),h.value.UserMail=s.value.UserMail,h.value.RoleRight=s.value.RoleRight,l.value=!l.value,t.value=!0};return{columns:h,rows:n,addData:m,updateData:w,deleteRow:g,confirmDelete:f,expanded:o,isAllCollapsed:i,toggleExpandAll:v,show_dialog:l,showDialog:U,isEditing:t,showDetails:y,selectedOption:r,options:["Admin","DBA","user"],UserMail:u}}};var h=t(1639),m=t(1663),w=t(1973),g=t(2857),f=t(1746),v=t(3532),U=t(1682),y=t(7220),b=t(4455),_=t(1821),R=t(2074),M=t(4458),k=t(3190),W=t(6611),C=t(6031),D=t(2146),Z=t(9984),q=t.n(Z);const x=(0,h.Z)(c,[["render",u]]),T=x;q()(c,"components",{QToolbar:m.Z,QToolbarTitle:w.Z,QIcon:g.Z,QTable:f.Z,QTr:v.Z,QTh:U.Z,QTd:y.Z,QBtn:b.Z,QCardActions:_.Z,QDialog:R.Z,QCard:M.Z,QCardSection:k.Z,QInput:W.Z,QSelect:C.Z}),q()(c,"directives",{ClosePopup:D.Z})}}]);