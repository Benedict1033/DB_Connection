"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[773],{8957:(e,t,a)=>{a.d(t,{Z:()=>s});var o=a(9302);function s(){const e=(0,o.Z)();e.notify.setDefaults({position:"bottom-right",timeout:2e3});const t=t=>{e.notify({color:"gray",message:t||"",html:!0})},a=t=>{e.notify({type:"positive",message:t||"Ok!",html:!0})},s=t=>{e.notify({type:"negative",message:t||"Fail",html:!0})};return{notifyDefault:t,notifySuccess:a,notifyError:s}}},8773:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var o=a(9835),s=a(1957);const i=(0,o._)("div",{cla:"row"}," ",-1),l={class:"row justify-center items-center"},n=(0,o._)("div",{class:"text-h5 text-grey-9"},"Log In Your Account",-1),r=(0,o._)("div",null," ",-1);function u(e,t,a,u,d,c){const m=(0,o.up)("q-input"),p=(0,o.up)("q-icon"),h=(0,o.up)("q-form"),g=(0,o.up)("q-card-section"),f=(0,o.up)("q-btn"),y=(0,o.up)("q-card-actions"),v=(0,o.up)("q-card");return(0,o.wg)(),(0,o.iD)(o.HY,null,[i,(0,o._)("div",l,[(0,o.Wm)(v,{square:"",bordered:"",class:"q-pa-lg shadow-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[n,r,(0,o.Wm)(h,{class:"q-gutter-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{square:"",filled:"",modelValue:e.form.userName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.userName=t),type:"email",label:"User Name"},null,8,["modelValue"]),(0,o.Wm)(m,{modelValue:e.form.password,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.password=t),filled:"",type:e.isPwd?"password":"text",label:"Password",onKeyup:t[3]||(t[3]=(0,s.D2)((t=>e.actLogin()),["enter"]))},{append:(0,o.w5)((()=>[(0,o.Wm)(p,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[1]||(t[1]=t=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"])])),_:1})])),_:1}),(0,o.Wm)(y,{class:"q-px-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{unelevated:"",color:"light-green-7",size:"lg",class:"full-width",label:"Login",onClick:t[4]||(t[4]=t=>e.actLogin())})])),_:1})])),_:1})])],64)}var d=a(499),c=a(8957),m=a(9613);const p=(0,o.aZ)({name:"LoginPage",setup(){const e=(0,d.iH)(!1),t=(0,d.iH)(!1),a=(0,d.iH)(!1),s=(0,d.iH)(""),i=(0,o.f3)("mapGlobalState"),{userInfo:l,setUserRights:n}=i,{notifyError:r}=(0,c.Z)(),u=(0,d.iH)({userName:"",password:""}),p=()=>{const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserMail:m.Z.getItem("User")})};fetch("https://localhost:44350/api/query_right",o).then((e=>e.text())).then((o=>{try{var s=JSON.parse(o);s[0].RoleRight,"Admin"===s[0].RoleRight&&(e.value=!0,t.value=!0,a.value=!0,m.Z.set("Right","Admin")),"DBA"===s[0].RoleRight&&(t.value=!0,a.value=!0,m.Z.set("Right","DBA")),"SysAdmin"===s[0].RoleRight&&(a.value=!0,m.Z.set("Right","SysAdmin")),window.location.reload()}catch{m.Z.set("Right","user"),window.location.reload()}}))},h=()=>{m.Z.set("Login",!1),"Admin"!=u.value.userName?s.value=u.value.userName+"@makalot.com":s.value=u.value.userName,m.Z.set("User",s.value);const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Account:s.value,Password:u.value.password})};fetch("https://localhost:44350/api/login",e).then((e=>e.text())).then((e=>{'"ok"'==e?(m.Z.set("Login",!0),p()):r(e)}))};return{...(0,d.BK)(l),isPwd:(0,d.iH)(!0),form:u,actLogin:h,Admin:e,SysAdmin:a,DBA:t,checkUserRight:p,userName:s}}});var h=a(1639),g=a(4458),f=a(3190),y=a(8326),v=a(6611),w=a(2857),Z=a(1821),b=a(4455),q=a(9984),R=a.n(q);const A=(0,h.Z)(p,[["render",u]]),_=A;R()(p,"components",{QCard:g.Z,QCardSection:f.Z,QForm:y.Z,QInput:v.Z,QIcon:w.Z,QCardActions:Z.Z,QBtn:b.Z})}}]);