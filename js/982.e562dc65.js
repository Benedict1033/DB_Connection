"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[982],{8957:(e,l,n)=>{n.d(l,{Z:()=>o});var a=n(9302);function o(){const e=(0,a.Z)();e.notify.setDefaults({position:"bottom-right",timeout:2e3});const l=l=>{e.notify({color:"gray",message:l||"",html:!0})},n=l=>{e.notify({type:"positive",message:l||"Ok!",html:!0})},o=l=>{e.notify({type:"negative",message:l||"Fail",html:!0})};return{notifyDefault:l,notifySuccess:n,notifyError:o}}},8982:(e,l,n)=>{n.r(l),n.d(l,{default:()=>T});var a=n(9835),o=n(6970),t=n(1957);const i={class:"q-pa-md"},d=["innerHTML"],u=(0,a._)("div",{class:"text-h6"},"Add new item!",-1),c={class:"row"};function s(e,l,n,s,r,m){const g=(0,a.up)("q-icon"),p=(0,a.up)("q-toolbar-title"),w=(0,a.up)("q-toolbar"),D=(0,a.up)("q-toggle"),v=(0,a.up)("q-th"),f=(0,a.up)("q-tr"),h=(0,a.up)("q-td"),C=(0,a.up)("q-btn"),y=(0,a.up)("q-table"),S=(0,a.up)("q-card-actions"),k=(0,a.up)("q-card-section"),b=(0,a.up)("q-input"),W=(0,a.up)("q-card"),_=(0,a.up)("q-dialog"),B=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(w,{class:"bg-grey-3"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{name:"build"}),(0,a.Uk)("   DB Management")])),_:1})])),_:1}),(0,a._)("div",i,[(0,a.Wm)(y,{columns:r.columns,rows:r.rows,"row-key":"DBName",onRowClick:l[1]||(l[1]=l=>e.selectedRow=l.row),expanded:r.expanded,"onUpdate:expanded":l[2]||(l[2]=e=>r.expanded=e)},{header:(0,a.w5)((e=>[(0,a.Wm)(f,{props:e},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(n=>((0,a.wg)(),(0,a.j4)(v,{key:n.name,props:e},{default:(0,a.w5)((()=>["toggle"===n.name?((0,a.wg)(),(0,a.j4)(D,{key:0,modelValue:r.isAllCollapsed,"onUpdate:modelValue":l[0]||(l[0]=e=>r.isAllCollapsed=e),"checked-icon":"remove","unchecked-icon":"add",onClick:r.toggleExpandAll},null,8,["modelValue","onClick"])):((0,a.wg)(),(0,a.iD)("span",{key:1,innerHTML:n.label},null,8,d))])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,a.w5)((e=>[(0,a.Wm)(f,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{key:"DBName",class:"dbName"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.DBName),1)])),_:2},1024),(0,a.Wm)(h,{key:"ConnectionString",class:"connection-string"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.ConnectiongString),1)])),_:2},1024),(0,a.Wm)(h,{key:"Deadline"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.Deadline),1)])),_:2},1024),(0,a.Wm)(h,{key:"Actions"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{color:"secondary",style:{"margin-left":"5px",width:"30px"},icon:"edit",onClick:l=>r.showDetails(e.row.DBName)},null,8,["onClick"]),(0,a.Wm)(C,{color:"deep-orange-9",style:{"margin-left":"5px",width:"30px"},icon:"delete",onClick:l=>r.confirmDelete(e.row.DBName)},null,8,["onClick"])])),_:2},1024),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D,{modelValue:e.expand,"onUpdate:modelValue":l=>e.expand=l,"checked-icon":"remove","unchecked-icon":"add"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["props"]),(0,a.wy)((0,a.Wm)(f,{props:e,style:{"background-color":"#fff4e7"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{key:"DBName"}),(0,a.Wm)(h,{key:"ConnectionString",class:"connection-string"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.BackupConnectiongString),1)])),_:2},1024),(0,a.Wm)(h,{key:"Deadline"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.BackupDeadline),1)])),_:2},1024),(0,a.Wm)(h,{key:"Actions"}),(0,a.Wm)(h,{key:"Show"})])),_:2},1032,["props"]),[[t.F8,e.expand]])])),_:1},8,["columns","rows","expanded"]),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{label:"ADD",color:"primary",onClick:r.showDialog,style:{width:"110px"},icon:"add"},null,8,["onClick"])])),_:1}),(0,a.Wm)(_,{modelValue:r.show_dialog,"onUpdate:modelValue":l[9]||(l[9]=e=>r.show_dialog=e),"full-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[u])),_:1}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a.Wm)(b,{style:{width:"30%","margin-left":"20px"},modelValue:r.columns.DBName,"onUpdate:modelValue":l[3]||(l[3]=e=>r.columns.DBName=e),label:"DB Name"},null,8,["modelValue"]),(0,a.Wm)(b,{style:{width:"70%","margin-left":"20px"},modelValue:r.columns.ConnectiongString,"onUpdate:modelValue":l[4]||(l[4]=e=>r.columns.ConnectiongString=e),label:"ConnectionString"},null,8,["modelValue"]),(0,a.Wm)(b,{style:{width:"25%","margin-left":"20px"},modelValue:r.columns.Deadline,"onUpdate:modelValue":l[5]||(l[5]=e=>r.columns.Deadline=e),label:"Deadline"},null,8,["modelValue"]),(0,a.Wm)(b,{style:{width:"70%","margin-left":"20px"},modelValue:r.columns.ConnectionString2,"onUpdate:modelValue":l[6]||(l[6]=e=>r.columns.ConnectionString2=e),label:"ConnectionString2"},null,8,["modelValue"]),(0,a.Wm)(b,{style:{width:"25%","margin-left":"20px"},modelValue:r.columns.Deadline2,"onUpdate:modelValue":l[7]||(l[7]=e=>r.columns.Deadline2=e),label:"Deadline2"},null,8,["modelValue"])])])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(C,{flat:"",label:"OK",color:"primary",onClick:l[8]||(l[8]=e=>r.isEditing?r.updateData():r.addData())},null,512),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])],64)}var r=n(499),m=n(8957);const g={data(){const{notifyError:e}=(0,m.Z)(),l=(0,r.iH)(!1),n=(0,r.iH)(!1),o=(0,r.iH)([]),t=(0,r.iH)(!1),i=(0,r.iH)([]),d=(0,r.iH)([]),u=(0,r.iH)([]),c=(0,r.iH)([{name:"DBName",align:"left",label:"DBName",field:"DBName"},{name:"ConnectiongString",align:"left",label:"Connectiong String",field:"ConnectiongString"},{name:"Deadline",align:"left",label:"Deadline",field:"Deadline",sortable:!0},{name:"Actions",align:"left",label:"Actions",field:"Actions"},{name:"toggle",align:"left",label:"",field:"Show"}]);(0,a.bv)((async()=>{const e=await fetch("https://localhost:44350/api/query_db");u.value=await e.json(),i.value=[...u.value].reverse()}));const s=()=>{if(""===c.value.DBName||""===c.value.ConnectiongString||""===c.value.ConnectionString2||""===c.value.Deadline||""===c.value.Deadline2)e("Value can't be null");else{const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({DBName:c.value.DBName,ConnectiongString:c.value.ConnectiongString,ConnectiongString2:c.value.ConnectionString2,Deadline:c.value.Deadline,Deadline2:c.value.Deadline2})};fetch("https://localhost:44350/api/create_db",l).then((e=>e.text())).then((l=>{'"Create Success"'===l?window.location.reload():e(l)}))}},g=()=>{if(""===c.value.DBName||""===c.value.ConnectiongString||""===c.value.ConnectionString2||""===c.value.Deadline||""===c.value.Deadline2)e("Value can't be null");else{const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({DBName:c.value.DBName,ConnectiongString:c.value.ConnectiongString,ConnectiongString2:c.value.ConnectionString2,Deadline:c.value.Deadline,Deadline2:c.value.Deadline2})};fetch("https://localhost:44350/api/update_db",l).then((e=>e.text())).then((l=>{'"Updated Success"'===l?window.location.reload():e(l)}))}},p=e=>{const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({DBName:e,ConnectiongString:c.value.ConnectiongString,ConnectiongString2:c.value.ConnectionString2,Deadline:c.value.Deadline,Deadline2:c.value.Deadline2})};fetch("https://localhost:44350/api/delete_db",l).then(window.location.reload())},w=e=>{window.confirm("確定要刪除此項目嗎？")&&this.deleteRow(e)},D=()=>{t.value?(o.value=u.value.map((e=>e.DBName)),t.value=!0):(o.value=[],t.value=!1)},v=()=>{c.value.DBName="",c.value.ConnectiongString="",c.value.ConnectionString2="",c.value.Deadline="",c.value.Deadline2="",l.value=!l.value,n.value=!1},f=e=>{d.value=this.rows.find((l=>l.DBName===e)),c.value.DBName=d.value.DBName,c.value.ConnectiongString=d.value.ConnectiongString,c.value.ConnectionString2=d.value.BackupConnectiongString,c.value.Deadline=d.value.Deadline,c.value.Deadline2=d.value.BackupDeadline,l.value=!l.value,n.value=!0};return{columns:c,rows:i,addData:s,updateData:g,deleteRow:p,confirmDelete:w,expanded:o,isAllCollapsed:t,toggleExpandAll:D,show_dialog:l,showDialog:v,isEditing:n,showDetails:f}}};var p=n(1639),w=n(1663),D=n(1973),v=n(2857),f=n(1746),h=n(3532),C=n(1682),y=n(3175),S=n(7220),k=n(4455),b=n(1821),W=n(2074),_=n(4458),B=n(3190),N=n(6611),V=n(2146),x=n(9984),Z=n.n(x);const q=(0,p.Z)(g,[["render",s]]),T=q;Z()(g,"components",{QToolbar:w.Z,QToolbarTitle:D.Z,QIcon:v.Z,QTable:f.Z,QTr:h.Z,QTh:C.Z,QToggle:y.Z,QTd:S.Z,QBtn:k.Z,QCardActions:b.Z,QDialog:W.Z,QCard:_.Z,QCardSection:B.Z,QInput:N.Z}),Z()(g,"directives",{ClosePopup:V.Z})}}]);